# STRIDE — Roommate Chores

| Поток / Элемент                | Угроза (STRIDE)         | Риск | Контроль                                                                                                            | Ссылка на NFR          | Проверка / Артефакт                                                      |
|--------------------------------|-------------------------|------|---------------------------------------------------------------------------------------------------------------------|------------------------|--------------------------------------------------------------------------|
| **F1 /login**                  | S: Spoofing             | R1   | MFA + rate-limit на /login                                                                                          | NFR-12, NFR-13         | e2e + ZAP baseline                                                       |
| **F1 /login**                  | I: Info disclosure      | R2   | Унифицированные ошибки по RFC7807                                                                                   | NFR-04                 | Контрактные тесты API                                                    |
| **F2 /users (store password)** | I: Info disclosure      | R3   | Argon2id + шифрование таблицы users                                                                                 | NFR-01, NFR-14         | Unit-тест хэширования + audit DB config                                  |
| **F3 /assignments/{id}**       | R: Repudiation          | R4   | Audit trail + owner-check                                                                                           | NFR-03, NFR-15         | Policy tests + audit log review                                          |
| **F4 /stats**                  | I: Info disclosure      | R5   | RBAC + owner-scoping для статистики                                                                                 | NFR-03                 | E2E RBAC тесты                                                           |
| **F5 internal API**            | D: DoS                  | R6   | Rate-limit + circuit breaker                                                                                        | NFR-12, NFR-16         | Load test + resilience test                                              |
| **F6 CI/CD pipeline**          | E: Privilege escalation | R7   | Изоляция runner + запрет секретов                                                                                   | NFR-09, NFR-17         | CI config scan + MR review                                               |
| **F5 / Database (DB)**         | T: Tampering            | R8   | DB write-protection + RBAC + audit + signed events/validations; integrity checks; queue signing for background jobs | NFR-03, NFR-14, NFR-15 | DB audit logs; integrity checks; signed event verification; policy tests |
| ------------------------------ | ----------------------- | ---- | ------------------------------------------------------------------------------------------------------------------- | ---------------------- | ------------------------------------------------------------------------ |
